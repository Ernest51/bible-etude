<!DOCTYPE html>
<html lang="fr" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Étude Biblique — 28 points (modèle strict)</title>

  <!-- Tailwind compilé côté build -->
  <link rel="stylesheet" href="/dist/output.css" onerror="this.remove();loadFallbackCSS()" />

  <script>
    function loadFallbackCSS(){
      const l=document.createElement('script');
      l.src="https://cdn.tailwindcss.com";
      document.head.appendChild(l);
    }
  </script>

  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  <style>
    :root{
      --c50:#eef2ff;--c100:#e0e7ff;--c200:#c7d2fe;--c600:#4f46e5;--c700:#4338ca;--c800:#3730a3;
      --ok:#10b981;--err:#ef4444;--ink:#0f172a;
    }
    body{background:#f7f8fb;color:#0f172a}
    .container-xl{max-width:1200px;margin-inline:auto}
    .card{background:#fff;border:1px solid var(--c100);border-radius:16px;box-shadow:0 12px 24px -12px rgba(2,6,23,.15)}
    .btn{display:inline-flex;align-items:center;gap:.55rem;border-radius:12px;font-weight:800;padding:.7rem 1rem}
    .btn-solid{background:var(--c600);color:#fff}.btn-solid:hover{background:var(--c700)}
    .btn-outline{border:1px solid var(--c200);background:#fff}
    .btn-ghost{border:1px dashed var(--c200);background:#fff}
    .badge{display:inline-grid;place-items:center;width:1.9rem;height:1.9rem;border-radius:.55rem;background:var(--c100);color:var(--c800);font-weight:800;font-size:.75rem}
    .sidebar-item{border:1px solid transparent;border-radius:12px;padding:.6rem .7rem;display:flex;align-items:flex-start;gap:.6rem}
    .sidebar-item:hover{background:var(--c50);border-color:var(--c200)}
    .sidebar-item.active{background:var(--c100);border-color:var(--c200);box-shadow:inset 4px 0 0 0 var(--c600)}
    .content-section{display:none;opacity:0;transition:opacity .18s ease}
    .content-section.active{display:block;opacity:1}
    .toast{position:fixed;right:14px;bottom:14px;background:#111827;color:#fff;padding:.65rem .95rem;border-radius:12px;box-shadow:0 10px 20px rgba(0,0,0,.15);z-index:200;transition:opacity .25s, transform .25s}
    .toolbar{background:#fff;border:1px solid var(--c100);border-radius:14px;padding:.6rem .8rem}
    .prose a{color:var(--c700);text-decoration:underline}
    .prose img{border-radius:12px;box-shadow:0 10px 24px rgba(2,6,23,.15);max-width:100%;height:auto}
    .ghost-note{display:none}
    .edit-wrap[aria-expanded="true"] .ghost-note{display:block}
    .edit-wrap[aria-expanded="true"] .display-note{display:none}
    .pill{background:#fff;border:1px solid var(--c100);border-radius:12px;padding:.35rem .6rem}
    .dropdown{position:relative}
    .menu{position:absolute;left:0;right:0;z-index:30;background:#fff;border:1px solid var(--c100);border-radius:12px;box-shadow:0 14px 28px -12px rgba(2,6,23,.18);max-height:300px;overflow:auto;display:none}
    .menu.open{display:block}
    .menu button{display:block;width:100%;text-align:left;padding:.55rem .8rem}
    .menu button:hover{background:var(--c50)}
    @media (max-width: 640px){
      .grid-mobile{display:grid;grid-template-columns:1fr;gap:12px}
    }
  </style>
</head>
<body class="min-h-screen">
  <div id="toasts"></div>

  <!-- ton header, main, sections restent identiques... -->

  <!-- Script identique, seulement API_URL pointant bien sur /api/chat -->
  <script>
    const API_URL_CHAT = "/api/chat";
    // (le reste de ton JS reste inchangé, car il est déjà strict et robuste)
  </script>
</body>
</html>
