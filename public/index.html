<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bible Étude — Accueil</title>
  <meta name="description" content="Prépare une étude biblique structurée : sélectionne un livre et un chapitre, puis génère ta fiche." />

  <!-- Styles de base (facultatif, sobre) -->
  <style>
    :root{
      --bg:#fafafa;--card:#fff;--fg:#111827;--muted:#6b7280;--border:#e5e7eb;
      --accent:#0ea5e9;--accent-ink:#075985;--ring:#bae6fd;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,"Noto Sans";
      background:var(--bg);color:var(--fg);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
    .wrap{max-width:960px;margin:32px auto;padding:0 16px}
    header h1{margin:0 0 6px;font-size:clamp(1.4rem,2vw+1rem,2rem)}
    header p{margin:0 0 18px;color:var(--muted)}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:20px}
    .row{display:flex;flex-wrap:wrap;gap:12px;align-items:end}
    label{display:block;font-weight:600;margin:8px 0 6px}
    select,input,button{font:inherit}
    select,input{
      border:1px solid var(--border);border-radius:10px;padding:.6rem .8rem;background:#fff;min-width:160px
    }
    .actions{display:flex;gap:10px;flex-wrap:wrap}
    .btn{
      display:inline-flex;align-items:center;gap:.5rem;padding:.7rem 1rem;border-radius:12px;border:1px solid var(--border);
      background:linear-gradient(#fff,#f9fafb);cursor:pointer;color:var(--accent-ink);text-decoration:none
    }
    .btn:hover{border-color:var(--ring);box-shadow:0 0 0 4px var(--ring)}
    .btn:active{transform:translateY(1px)}
    .hint{font-size:.92rem;color:var(--muted)}
    /* Barre de progression (optionnelle, branchée par app.js si dispo) */
    #progressBar{height:6px;background:linear-gradient(90deg,var(--accent),#60a5fa);border-radius:999px;width:0;transition:width .3s ease}
    .progress-wrap{height:6px;background:#eef2f7;border-radius:999px;overflow:hidden;margin:14px 0}
    @media (max-width:640px){ .row > *{flex:1 1 100%} }
  </style>
</head>
<body>
  <main class="wrap">
    <header>
      <h1>Bible Étude</h1>
      <p>Sélectionne un livre et un chapitre, puis lance l’étude ou ouvre le texte biblique en ligne.</p>
    </header>

    <section class="card" aria-labelledby="form-titre">
      <h2 id="form-titre" style="margin:0 0 12px;font-size:1.1rem">Préparer l’étude</h2>

      <!-- Sélecteurs robustes : garde des IDs parlants, avec fallbacks pris en charge par bible-buttons.js -->
      <div class="row" style="margin-bottom:12px">
        <div>
          <label for="book">Livre</label>
          <select id="book" name="book">
            <!-- Quelques exemples; complète si tu as déjà la liste dans app.js (il pourra surcharger) -->
            <option value="Genèse">Genèse</option>
            <option value="Exode">Exode</option>
            <option value="Psaumes">Psaumes</option>
            <option value="Matthieu">Matthieu</option>
            <option value="Jean">Jean</option>
            <option value="Romains">Romains</option>
          </select>
        </div>

        <div>
          <label for="chapter">Chapitre</label>
          <input id="chapter" name="chapter" type="number" inputmode="numeric" min="1" step="1" placeholder="1" value="1" />
          <p class="hint">Ex. 1, 2, 3…</p>
        </div>
      </div>

      <div class="actions" style="margin:10px 0 12px">
        <!-- Bouton Valider = ouvre BibleGateway selon le livre & chapitre -->
        <button id="validateBtn" class="btn" type="button">Valider</button>

        <!-- Nouveau bouton Lire la Bible (ouvre aussi la même référence) -->
        <button id="readBtn" class="btn" type="button">Lire la Bible</button>

        <!-- Ancre cachée pour compatibilité avec l’ancien code qui cherchait #readLink -->
        <a id="readLink" href="#" target="_blank" rel="noopener noreferrer" style="display:none">Lire</a>
      </div>

      <!-- Barre de progression désormais présente si ton JS en fait usage -->
      <div class="progress-wrap" aria-hidden="true">
        <div id="progressBar"></div>
      </div>

      <p class="hint">Astuce : “Valider” ou “Lire la Bible” ouvrent le chapitre directement sur BibleGateway (LSG).</p>
    </section>

    <!-- Section résultat/diagnostic si ton app.js l’utilise -->
    <section id="result" class="card" style="margin-top:16px;display:none">
      <h2 style="margin:0 0 12px;font-size:1.1rem">Résultat</h2>
      <div id="output"></div>
    </section>
  </main>

  <!-- Charge le loader qui ajoute ?v=timestamp à app.js pour casser le cache -->
  <script src="/app-loader.js" defer></script>
  <!-- Petit module pour brancher les boutons sans toucher à ton app.js -->
  <script src="/bible-buttons.js" defer></script>
</body>
</html>
