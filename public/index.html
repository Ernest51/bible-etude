// public/app.js
const API_URL_CHAT = "/api/chat";
const POINTS = [
  "Prière d’ouverture — Invocation du Saint-Esprit pour éclairer mon étude.",
  "Canon et testament — Identifier le livre dans le canon.",
  "Questions du chapitre précédent — Minimum 5 questions et réponses intégrales.",
  "Titre du chapitre — Résumé doctrinal.",
  "Contexte historique — Carte, frise.",
  "Structure littéraire.",
  "Genre littéraire.",
  "Auteur et généalogie.",
  "Verset-clé doctrinal.",
  "Analyse exégétique.",
  "Analyse lexicale.",
  "Références croisées.",
  "Fondements théologiques.",
  "Thème doctrinal.",
  "Fruits spirituels.",
  "Types bibliques.",
  "Appui doctrinal.",
  "Comparaison entre versets.",
  "Comparaison avec Actes 2.",
  "Verset à mémoriser.",
  "Enseignement pour l’Église.",
  "Enseignement pour la famille.",
  "Enseignement pour enfants.",
  "Application missionnaire.",
  "Application pastorale.",
  "Application personnelle.",
  "Versets à retenir.",
  "Prière de fin."
];

// Sélecteur rapide
const $ = (s) => document.querySelector(s);

// Toast
function toast(msg) {
  const d = document.createElement("div");
  d.className = "toast";
  d.textContent = msg;
  $("#toasts").appendChild(d);
  setTimeout(() => d.remove(), 4000);
}

// Barre de progression
function startProgress() {
  $("#progressContainer").style.display = "block";
  $("#progressBar").style.width = "0%";

  let width = 0;
  const interval = setInterval(() => {
    width += 3;
    if (width >= 90) {
      clearInterval(interval);
    }
    $("#progressBar").style.width = width + "%";
  }, 200);
  return interval;
}

function finishProgress() {
  $("#progressBar").style.width = "100%";
  setTimeout(() => {
    $("#progressContainer").style.display = "none";
    $("#progressBar").style.width = "0%";
  }, 800);
}

// Génération des sections
functi
