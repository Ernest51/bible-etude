<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Méditation</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Spectral:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#f6f7fb;--panel:#fff;--text:#0f172a;--muted:#6b7280;--border:#e5e7eb;--dark:#111827;--accent:#0891b2}
    *{box-sizing:border-box} html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
    header{background:#fff;border-bottom:1px solid var(--border);position:sticky;top:0;padding:14px;z-index:5}
    h1{margin:0;text-align:center;font-size:24px;font-weight:800}
    main{max-width:1200px;margin:16px auto;padding:0 12px}
    .controls{display:grid;grid-template-columns:1.2fr .8fr .6fr .6fr .9fr auto auto auto;gap:10px;margin:10px 0}
    @media(max-width:1000px){.controls{grid-template-columns:1fr 1fr 1fr 1fr;grid-auto-rows:auto}}
    select,input,button{border:1px solid var(--border);border-radius:10px;padding:10px;background:#fff}
    .btn{background:var(--dark);color:#fff;border:0}
    .layout{display:grid;grid-template-columns:320px 1fr;gap:12px}
    @media(max-width:1000px){.layout{grid-template-columns:1fr}}
    .sidebar,.editor{background:var(--panel);border:1px solid var(--border);border-radius:12px}
    .side-head{padding:10px;border-bottom:1px solid var(--border);font-weight:700}
    .list{max-height:70vh;overflow:auto}
    .item{display:flex;gap:8px;align-items:center;padding:10px;border-bottom:1px solid var(--border);cursor:pointer}
    .item.active{background:#f1f5f9}
    .idx{width:24px;height:24px;border:1px solid var(--border);border-radius:999px;display:inline-flex;align-items:center;justify-content:center}
    .dot{width:8px;height:8px;border-radius:999px;background:#d97706;margin-left:auto}.dot.ok{background:#16a34a}
    .ed-head{display:flex;gap:8px;align-items:center;justify-content:space-between;padding:10px;border-bottom:1px solid var(--border)}
    textarea#noteArea,#noteView{width:100%;min-height:420px;border:1px solid var(--border);border-radius:10px;padding:12px;font-family:Spectral,Georgia,serif;line-height:1.6;white-space:pre-wrap}
    #noteView{display:none;background:#fff}
    .links-panel{background:#fafafa;border:1px dashed var(--border);border-radius:10px;padding:8px 10px;margin-top:8px;font-size:14px}
    .progress{height:4px;background:#e5e7eb} .bar{height:100%;width:0;background:linear-gradient(90deg,#06b6d4,#16a34a)}
    footer{max-width:1200px;margin:20px auto;padding:0 12px;color:var(--muted);font-size:14px}
  </style>
</head>
<body data-theme="cyan">
  <header><h1>Méditation</h1></header>
  <main>
    <div class="progress"><div id="progressBar" class="bar"></div></div>

    <div class="controls">
      <input id="searchRef" placeholder="Rechercher (ex : Marc 5:1)"/>
      <select id="bookSelect"></select>
      <select id="chapterSelect"></select>
      <select id="verseSelect"></select>
      <select id="versionSelect"><option value="LSG" selected>LSG</option><option value="PDV">PDV</option></select>
      <select id="themeSelect"><option value="cyan" selected>Thème : Cyan</option></select>
      <label style="display:flex;align-items:center;gap:8px;"><input id="enrichToggle" type="checkbox" checked/><span>Mode enrichi</span></label>
      <button id="readBtn" class="btn">Lire la Bible</button>
      <button id="generateBtn" class="btn">Générer</button>
      <button id="validate" class="btn">Valider</button>
    </div>

    <div class="layout">
      <aside class="sidebar">
        <div class="side-head">Rubriques (28)</div>
        <div id="pointsList" class="list"></div>
      </aside>

      <section class="editor">
        <div class="ed-head">
          <div id="edTitle" class="ed-title">—</div>
          <div>
            <button id="prev">◀</button>
            <button id="next">▶</button>
          </div>
        </div>
        <div class="ed-body" style="padding:12px">
          <textarea id="noteArea" placeholder="Écris ici…"></textarea>
          <div id="noteView" contenteditable="true" spellcheck="false"></div>
          <div id="linksPanel" class="links-panel"><b>Liens détectés :</b> <div id="linksList"></div></div>
        </div>
        <div class="ed-foot" style="padding:10px;border-top:1px solid var(--border);display:flex;justify-content:space-between;">
          <span id="metaInfo">Point — / 28</span>
          <span class="small">Sauvegarde auto (2s)</span>
        </div>
      </section>
    </div>
  </main>

  <footer>© <span id="y"></span> — Méditation</footer>
  <script src="/app.js" defer></script>
</body>
</html>
